"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const mixins_1 = require("./mixins");
const utils_1 = require("../utils");
const RESPONSE_PATTERN = /:\s+(\w+)/;
/**
 * @type {import('./mixins').AppearanceMixin & ThisType<import('../driver').AndroidDriver>}
 * @satisfies {import('@appium/types').ExternalDriver}
 */
const AppearanceMixin = {
    /**
     * Set the Ui appearance.
     *
     * @since Android 10
     */
    async mobileSetUiMode(opts) {
        const { mode, value } = (0, utils_1.requireArgs)(['mode', 'value'], opts);
        await this.adb.shell(['cmd', 'uimode', mode, value]);
    },
    /**
     * Get the Ui appearance.
     *
     * @since Android 10
     * @returns {Promise<string>} The actual state for the queried UI mode,
     * for example 'yes' or 'no'
     */
    async mobileGetUiMode(opts) {
        const { mode } = (0, utils_1.requireArgs)(['mode'], opts);
        const response = await this.adb.shell(['cmd', 'uimode', mode]);
        // response looks like 'Night mode: no'
        const match = RESPONSE_PATTERN.exec(response);
        if (!match) {
            throw new Error(`Cannot parse the command response: ${response}`);
        }
        return match[1];
    },
};
exports.default = AppearanceMixin;
(0, mixins_1.mixin)(AppearanceMixin);
//# sourceMappingURL=appearance.js.map